<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated UI Maker for WWMI - Tutorial</title>
    <script>
        // Apply theme based on settings.json
        (async () => {
            try {
                const response = await fetch('settings.json');
                if (response.ok) {
                    const settings = await response.json();
                    if (settings.theme === 'dark') {
                        document.documentElement.classList.add('dark-mode');
                    }
                } else {
                    console.warn(`settings.json not found or failed to load (status: ${response.status}). Using default light theme.`);
                }
            } catch (error) {
                console.error('Error fetching or parsing settings.json. Using default light theme.', error);
            }
        })();
    </script>
    <style>
        :root {
            /* Light Mode: Pastel Pink & White Theme */
            --bg-color: #FFF6F9;
            --text-color: #6D435A;
            --header-color: #D95383;
            --section-bg: #FFFFFF;
            --accent-color: #F472B6;
            --nav-bg: #F5C6D6;
            --nav-text: #6D435A;
            --nav-hover-bg: #EBAACB;
            --nav-hover-text: #6D435A;
            --note-bg: #FDE7EA;
            --note-border: #F472B6;
            --note-text: #6D435A;
            --shadow-color: rgba(217, 83, 131, 0.1);
            --media-filter: none;
            --code-bg: #2E2529;
            --code-text: #F5C6D6;
        }

        html.dark-mode {
            /* Dark Mode: Neon Theme */
            --bg-color: #0d0d0d;
            --text-color: #e0e0e0;
            --header-color: #00BFFF; /* Neon Blue */
            --section-bg: #1a1a1a;
            --accent-color: #F000B8; /* Neon Magenta */
            --nav-bg: #151515;
            --nav-text: #e0e0e0;
            --nav-hover-bg: #2c2c2c;
            --nav-hover-text: var(--header-color); /* Neon Blue on hover */
            --note-bg: #2A2A00;
            --note-border: #FFFF00; /* Neon Yellow */
            --note-text: #e0e0e0;
            --shadow-color: rgba(0, 191, 255, 0.2);
            --media-filter: brightness(.9) contrast(1.1);
            --code-bg: #1a1a1a;
            --code-text: #39FF14; /* Neon Green */
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .container {
            display: flex;
            flex: 1;
        }
        .side-nav {
            width: 250px;
            background-color: var(--nav-bg);
            color: var(--nav-text);
            padding: 20px;
            box-shadow: 2px 0 5px var(--shadow-color);
            overflow-y: auto;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }
        .side-nav h2 {
            color: var(--nav-text);
            margin-top: 0;
            font-size: 1.5em;
            margin-bottom: 20px;
        }
        .side-nav ul {
            list-style-type: none;
            padding: 0;
        }
        .side-nav li {
            margin-bottom: 15px;
        }
        .side-nav a {
            color: var(--nav-text);
            text-decoration: none;
            display: block;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.3s ease, color 0.3s ease, text-shadow 0.3s ease;
        }
        .side-nav a:hover {
            background-color: var(--nav-hover-bg);
            color: var(--nav-hover-text);
        }
        .content {
            flex: 1;
            padding: 40px;
            margin-left: 290px;
            overflow-y: auto;
        }
        h1, h2, h3 {
            color: var(--header-color);
            margin-top: 40px;
            transition: color 0.3s ease, text-shadow 0.3s ease;
        }
        img, video, .step-video {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
            box-shadow: 0 4px 8px var(--shadow-color);
            filter: var(--media-filter);
            transition: filter 0.3s ease, box-shadow 0.3s ease;
        }
        .section {
            margin-bottom: 60px;
            background-color: var(--section-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px var(--shadow-color);
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }
        .steps ol { margin-left: 20px; list-style-type: decimal; }
        .steps li { margin-bottom: 20px; }
        .step-image { display: block; margin: 20px 0; }
        .code-block {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', Courier, monospace;
            margin: 20px 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-x: auto;
        }
        .note {
            background-color: var(--note-bg);
            border-left: 5px solid var(--note-border);
            color: var(--note-text);
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .image-gallery { display: flex; justify-content: space-between; flex-wrap: wrap; }
        .image-gallery img { width: 100%; max-width: 300px; margin: 10px; border-radius: 5px; }
        a { color: var(--accent-color); text-decoration: none; }
        a:hover { text-decoration: underline; }
        .step-image, .step-video { width: 100%; height: auto; display: block; }
        
        /* --- Dark Mode Specific Effects --- */
        html.dark-mode h1,
        html.dark-mode h2,
        html.dark-mode h3 {
            text-shadow: 0 0 5px var(--header-color);
        }
        html.dark-mode .side-nav a:hover {
            text-shadow: 0 0 3px var(--header-color);
        }
        html.dark-mode .section {
             border: 1px solid rgba(255, 255, 255, 0.05);
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('.side-nav a');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetSection = document.getElementById(targetId);
                    if (targetSection) {
                        window.scrollTo({
                            top: targetSection.offsetTop - 20,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });
    </script>
</head>
<body>

    <div class="container">
        <div class="side-nav">
            <h2>Contents</h2>
            <ul>
                <li><a href="#team-portrait-tool">I. How to use Team Portrait Tool</a></li>
                <li><a href="#general-ui-tool">II. How to use General UI Tool</a></li>
                <li><a href="#plugins-tool">III. How to use Plug-ins Tool</a></li>
            </ul>
        </div>

        <div class="content">
            <h1>Animated UI Maker for WWMI</h1>
            <p>Welcome to the tutorial for the Animated UI Maker. This tool allows you to create custom animated UI for Wuthering Waves. Depending on the type of animation you want to implement, follow the respective sections below:</p>

            <div id="team-portrait-tool" class="section">
                <h2>I. How to use Team Portrait Tool</h2>
                <p>If you want to use a short video or gif for your animated portraits, follow these steps:</p>
                
                <div class="steps">
                    <ol>
                        <li>Go to the <strong>Team Portrait Tool</strong> group module.</li>
                        
                        <li>Click the <strong>Video Editor</strong> module, then click the "+" button to add a container.</li>
                        <img class="step-image" src="Tutorial-Resources/tpt-module-screenshot.png" alt="Team Portrait Tool Module">
                        
                        <li>You can add up to 3 containers in the display area. These simulate what it would look like for your team composition. To remove a container, click the "x" on the top-left of the container.</li>

                        <li>To add a gif/video, click the image with red borders. 
                        <img class="step-image" src="Tutorial-Resources/video-editor.png" alt="Video Editor Module">
                        These borders indicate which parts will be hidden by the game.</li>
                        <div class="image-gallery">
                            <img src="Tutorial-Resources/game-hidden-portrait-part1.gif" alt="Hidden Portrait Part 1">
                            <img src="Tutorial-Resources/game-hidden-portrait-part2.gif" alt="Hidden Portrait Part 2">
                            <img src="Tutorial-Resources/game-hidden-portrait-part3.gif" alt="Hidden Portrait Part 3">
                        </div>
                        

                        <li>Edit the gif/video using the various textboxes and sliders. The top section adjusts the position of the gif/video in pixels, while the bottom sliders control opacity, contrast, brightness, saturation, and rotation. There is also a toggle to reverse the gif/video, and a save button to save your work to the <code>media</code> folder.</li>
                        

                        <img class="step-image" src="Tutorial-Resources/folder-structure.png" alt="Folder Structure">

                        <li>After saving, go to the <strong>INI File Maker</strong> module to create the ini file that will animate your team portrait. Click the "+" to add a container.</li>
                        <li>Fill in the required information, including the character name and hashes. The character name textbox has suggestions that auto-fill the hash input for convenience.</li>
                        <img class="step-image" src="Tutorial-Resources/ini-file-maker.png" alt="INI File Maker">

                        <li>Click the <strong>Create INI File</strong> button to generate the frame folders and ini file. These will be zipped, so unzip them into the <code>Mod</code> folder of WWMI.</li>

                        <li>You're done! Your custom animated portrait should now work with WWMI.</li>
                        <img class="step-image" src="Tutorial-Resources/portrait-preview.gif" alt="Portrait Preview">
                    </ol>
                </div>
            </div>

            <div id="general-ui-tool" class="section">
                <h2>II. How to use General UI Tool</h2>
                <p>If you have a long video (over 1 minute), follow these steps:</p>

                <div class="steps">
                    <ol>
                        <li>Open the <strong>General UI Tool</strong> group module.</li>
                        
                        <li>Click the <strong>Video Processing</strong> module and click the "+" to add a container. You can add up to 3 containers here, though this module can also be used for other game elements.</li>
                        <img class="step-image" src="Tutorial-Resources/gut-module-screenshot.png" alt="General UI Tool Module">
                        
                        <li>Fill in the necessary fields as shown in the module container. You will need to:</li>
                        <ul>
                            <li>Select the video you want to replace the game element.</li>
                            <li>Set the target FPS (higher FPS results in more frames but can slow down the game if set too high).</li>
                            <li>Set the segment length to split the video into parts for faster processing.</li>
                            <li>Specify the output frames folder, which will be generated automatically.</li>
                        </ul>
                        <img class="step-image" src="Tutorial-Resources/video-processing.png" alt="Video Processing">

                        <li>Click <strong>Start Processing</strong> once you've filled out the fields.</li>

                        <li>Now, optimize the frames to ensure smooth animation. This involves scaling down the frames and converting them to DDS format, which is ideal for game modding.</li>
                        
                        <li>In the <strong>Frame Optimizing Tool</strong>, choose <strong>Combined Mode</strong> for all-in-one processing. This mode will handle all manual processes, including fixing washed-out frames, in one go.</li>

                        <li>Select the frames folder, then choose the scale, how many batches of frames you want to process simultaneously, and set your GPU ID (you can find this in the Task Manager under the Performance tab) and click <strong>Convert to DDS</strong>.</li>

                        <li>Click <strong>Start Processing</strong> to proceed.</li>

                        <img class="step-image" src="Tutorial-Resources/optimize-frames.png" alt="Optimize Frames">

                        <li>Next, go to the <strong>INI File Maker v2</strong> module to create the ini file for the long animation.</li>
                        <img class="step-image" src="Tutorial-Resources/ini-file-maker2.png" alt="INI File Maker v2">

                        <li>Select the frames folder and preview the animation. If the frames appear darker, that's normalâ€”these will return to their correct appearance in the game.</li>
                        <img class="step-image" src="Tutorial-Resources/comparison.png" alt="Color Comparison">

                        <li>Enter the character's hash value. You can click on the name textbox to auto-fill the hash.</li>

                        <li>Click <strong>Process and Create ZIP</strong> to finish. The mod is now ready to be placed wherever you need it.</li>
                        <div class="media-container">
                            <video class="step-video" autoplay loop muted playsinline>
                                <source src="Tutorial-Resources/MenuUI.webm" type="video/webm">
                                Your browser does not support the video tag. This is a preview of the animated menu UI.
                            </video>
                        </div>
                    </ol>
                </div>
            </div>

            <div id="plugins-tool" class="section">
                <h2>III. How to use Plug-ins Tool</h2>
                <p>This section is for developers who want to add custom plugins to the tool.</p>

                <h3>A. HTML Plugins</h3>
                <ol>
                    <li>Create a folder with a <code>main.html</code> file inside it.</li>
                    <li>To import an HTML plugin, click the <strong>Import</strong> button and select the folder containing the <code>main.html</code> file.</li>
                    <img class="step-image" src="Tutorial-Resources/html-plugin.png" alt="HTML Plugin">
                </ol>

                <h3>B. PyQt5 Plugins</h3>
                <ol>
                    <li>Create a folder with a <code>main.py</code> file inside it. The main class must be a <code>QWidget</code> for it to work.</li>
                    <div class="code-block">
import sys
from PyQt5.QtWidgets import QApplication, QWidget, QVBoxLayout, QLabel

class Main(QWidget):
    def __init__(self):
        super().__init__()
        self.initUI()

    def initUI(self):
        self.setWindowTitle('Main GUI')
        self.layout = QVBoxLayout()
        self.setLayout(self.layout)

        label = QLabel('This is the main GUI')
        self.layout.addWidget(label)

if __name__ == '__main__':
    app = QApplication(sys.argv)
    ex = Main()
    ex.show()
    sys.exit(app.exec_())
                    </div>
                    <li>Click the <strong>Import</strong> button and select the folder containing <code>main.py</code>.</li>
                    <img class="step-image" src="Tutorial-Resources/python-plugin.png" alt="Python Plugin">
                </ol>

                <h3>C. Plugin Maker AI</h3>
                <ol>
                    <li>Install <a href="https://ollama.com/">Ollama</a> and choose a coding model to use (e.g., <code>qwen2.5-coder</code>).</li>
                    <li>Ask the AI to generate the plugin code with the appropriate features, such as including CSS and JS for HTML plugins or using <code>PyQt5</code> for Python plugins.</li>
                    <img class="step-image" src="Tutorial-Resources/chat.png" alt="Plugin Maker Chat">
                    <img class="step-image" src="Tutorial-Resources/code.png" alt="Plugin Maker Chat">
                    <li>Edit the generated code and export it as a plugin folder.</li>
                </ol>
            </div>
        </div>
    </div>
</body>
</html>